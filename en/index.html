<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Don't be alone in a disaster. National Disaster Network helps you build a safe communication and coordination network with your neighbors.">
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="National Disaster Network | Disaster Communication and Solidarity Network">
  <meta property="og:description" content="Don't be alone in a disaster. National Disaster Network helps you build a safe communication and coordination network with your neighbors.">
  <meta property="og:image" content="../images/logo/logo-main.png">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="National Disaster Network | Disaster Communication and Solidarity Network">
  <meta name="twitter:description" content="Don't be alone in a disaster. National Disaster Network helps you build a safe communication and coordination network with your neighbors.">
  <!-- fav icon -->
  <link rel="icon" href="../images/logo/logo-main.png" type="image/png">

  <!-- bootstarp css file -->
  <link rel="stylesheet" href="../css/bootstrap.min.css">

  <!-- aos.css file -->
  <link rel="stylesheet" href="../css/aos.css">

  <!-- fancybox css file -->
  <link rel="stylesheet" href="../css/jquery.fancybox.min.css">

  <!-- owl carousel css file -->
  <link rel="stylesheet" href="../css/owl.carousel.min.css">
  <link rel="stylesheet" href="../css/owl.theme.default.min.css">

  <!--  toasts file     -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css">

  <!-- bootstrap icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <!-- RemixIcon -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  
  <!-- Leaflet CSS for real map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- main css file -->
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/forms-modern.css">
  <link rel="stylesheet" href="../css/desktop-premium.css">
  <title>National Disaster Network | Disaster Communication and Solidarity Network</title>
  <style>
    /* Bring nav links closer to logo on English page */
    @media (min-width: 1024px) {
      .nav-center {
        margin-left: 1rem !important;
      }
    }
  </style>
</head>

<body class="home-1" data-aos-easing="fade-up" data-aos-duration="500" data-aos-delay="0">

  <!-- start preLoader -->
  <div id="preloader">
    <svg id="mainSVG" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 600">
      <defs>
        <radialGradient id="mainGrad" cx="346.198916" cy="300" fx="346.198916" fy="300" r="100" gradientUnits="userSpaceOnUse">
          <stop offset=".68" stop-color="#21df51"></stop>
          <stop offset=".72" stop-color="#3add63"></stop>
          <stop offset=".77" stop-color="#4fdd73"></stop>
          <stop offset=".82" stop-color="#66db83"></stop>
          <stop offset=".88" stop-color="#7cd893"></stop>
          <stop offset=".93" stop-color="#95d8a6"></stop>
          <stop offset=".99" stop-color="#bde6c7"></stop>
          <stop offset="1" stop-color="#e3f1e7"></stop>
        </radialGradient>
      </defs>
      <circle id="fillDot" cx="400" cy="300" fill="#21df51" r="100"></circle>
      <circle id="gradDot" cx="400" cy="300" fill="url(#mainGrad)" r="100"></circle>
    </svg>
  </div>
  <!-- end preLoader -->

  <!-- start scroll to top button -->
  <div id="progress">
    <span id="progress-value"><i class="bi bi-arrow-up-short"></i></span>
  </div>
  <!-- end scroll to top button -->


  <!-- ======= start Header ======= -->
  <header id="site-header" class="header-sticky">
    <div class="nav-shell">
      <!-- Left: Logo -->
      <div class="nav-left">
        <a class="navbar-brand" href="#top">National Disaster Network</a>
      </div>
      
      <!-- Center: Nav Links (Absolute Centered on Desktop) -->
      <nav class="nav-center desktop-nav">
        <div class="navbar-collapse">
          <ul class="navbar-nav menu" id="navbar">
            <li class="nav-item">
              <a class="nav-link" href="#how-it-works">How It Works?</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="kayit.html">Join the Network</a>
            </li>
          </ul>
        </div>
      </nav>
      
      <!-- Right: Actions (Desktop: Language + CTA + Theme | Mobile: Theme + Hamburger) -->
      <div class="nav-right">
        <!-- Language Dropdown (Desktop Only) -->
        <div class="language-dropdown-wrapper desktop-language-dropdown">
          <button 
            type="button" 
            id="language-dropdown-trigger" 
            class="language-dropdown-trigger" 
            aria-haspopup="menu" 
            aria-expanded="false"
            aria-label="Language selection">
            <span class="language-flag" id="language-flag">
              <!-- EN Flag SVG -->
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="flag-icon">
                <rect width="18" height="18" fill="#012169"/>
                <path d="M0 0L18 18M18 0L0 18" stroke="#FFFFFF" stroke-width="2"/>
                <path d="M0 0L18 18M18 0L0 18" stroke="#C8102E" stroke-width="1.2"/>
                <path d="M9 0V18M0 9H18" stroke="#FFFFFF" stroke-width="2.5"/>
                <path d="M9 0V18M0 9H18" stroke="#C8102E" stroke-width="1.5"/>
              </svg>
            </span>
            <span class="language-code" id="language-code">EN</span>
            <i class="bi bi-chevron-down language-chevron"></i>
          </button>
          <div id="language-dropdown-menu" class="language-dropdown-menu" role="menu" aria-hidden="true">
            <button 
              type="button" 
              class="language-menu-item" 
              role="menuitem" 
              data-lang="tr"
              aria-label="Türkçe">
              <span class="language-flag">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="flag-icon">
                  <rect width="18" height="18" fill="#E30A17"/>
                  <!-- Crescent (Hilal) -->
                  <circle cx="7" cy="9" r="4" fill="#FFFFFF"/>
                  <circle cx="8.5" cy="9" r="3.5" fill="#E30A17"/>
                  <!-- Star -->
                  <path d="M12.5 6.5L12.8 7.3L13.6 7.1L12.9 7.6L13.2 8.4L12.5 7.9L11.8 8.4L12.1 7.6L11.4 7.1L12.2 7.3Z" fill="#FFFFFF"/>
                </svg>
              </span>
              <span class="language-code-small">TR</span>
              <span class="language-name">Türkçe</span>
            </button>
            <button 
              type="button" 
              class="language-menu-item" 
              role="menuitem" 
              data-lang="en"
              aria-label="English">
              <span class="language-flag">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg" class="flag-icon">
                  <rect width="18" height="18" fill="#012169"/>
                  <path d="M0 0L18 18M18 0L0 18" stroke="#FFFFFF" stroke-width="2"/>
                  <path d="M0 0L18 18M18 0L0 18" stroke="#C8102E" stroke-width="1.2"/>
                  <path d="M9 0V18M0 9H18" stroke="#FFFFFF" stroke-width="2.5"/>
                  <path d="M9 0V18M0 9H18" stroke="#C8102E" stroke-width="1.5"/>
                </svg>
              </span>
              <span class="language-code-small">EN</span>
              <span class="language-name">English</span>
            </button>
          </div>
        </div>
        
        <!-- CTA Button (Desktop Only) -->
        <a class="btn btn-cta desktop-cta" href="kayit.html" aria-label="Be Part of the Network – Register in 2 Minutes">BE PART OF THE NETWORK</a>
        
        <!-- Dark Mode Toggle (Visible on both desktop and mobile) -->
        <button id="mode-toggle" class="btn-light-mode switch-button mode-toggle-universal" aria-label="Dark mode">
          <i id="mode-icon" class="bi bi-moon-fill"></i>
        </button>
        
        <!-- Mobile Actions: Hamburger (Mobile only) -->
        <div class="mobile-actions">
          <button id="mobile-menu-toggle" class="mobile-menu-toggle" type="button" aria-controls="mobile-menu" aria-expanded="false" aria-label="Open menu">
            <i class="bi bi-list" id="menu-icon"></i>
          </button>
        </div>
      </div>
    </div>
  </header>
  <!-- ======= end Header ======= -->

  <!-- ======= Mobile Menu Drawer (Fixed Overlay) ======= -->
  <div id="mobile-menu-wrapper" class="mobile-menu-wrapper" aria-hidden="true">
    <!-- Overlay -->
    <button 
      id="mobile-menu-overlay" 
      class="mobile-menu-overlay" 
      aria-label="Close menu"
      type="button">
    </button>
    
    <!-- Drawer Panel -->
    <aside 
      id="mobile-menu" 
      class="mobile-menu-drawer" 
      role="dialog" 
      aria-modal="true" 
      aria-labelledby="mobile-menu-title">
      <!-- Header with Swipe Handle -->
      <div class="mobile-menu-header">
        <div class="mobile-menu-swipe-handle"></div>
        <div class="mobile-menu-header-content">
          <h2 id="mobile-menu-title" class="mobile-menu-title">Menu</h2>
          <button 
            id="mobile-menu-close" 
            class="mobile-menu-close" 
            aria-label="Close" 
            type="button">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      </div>

      <!-- Navigation Links -->
      <nav class="mobile-menu-nav">
        <!-- Primary Section -->
        <div class="mobile-menu-section">
          <div class="mobile-menu-section-label">Main Menu</div>
          <a href="#how-it-works" class="mobile-nav-item">
            <i class="bi bi-gear" aria-hidden="true"></i>
            <span>How It Works?</span>
            <i class="bi bi-chevron-right mobile-nav-chevron" aria-hidden="true"></i>
          </a>
        </div>

      </nav>

      <!-- Bottom Actions (Fixed at bottom) -->
      <div class="mobile-menu-footer">
        <!-- Language Selector (Compact) -->
        <div class="mobile-language-compact">
          <button 
            type="button" 
            id="mobile-language-dropdown-trigger" 
            class="mobile-language-trigger" 
            aria-haspopup="dialog" 
            aria-expanded="false"
            aria-label="Language selection">
            <span class="language-flag" id="mobile-current-flag">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="20" height="20" rx="2" fill="#012169"/>
                <path d="M0 0l20 20M20 0L0 20" stroke="white" stroke-width="2"/>
                <path d="M0 0l20 20M20 0L0 20" stroke="#C8102E" stroke-width="1.2"/>
              </svg>
            </span>
            <span class="language-name-compact" id="mobile-language-name">English</span>
            <i class="bi bi-chevron-down language-chevron"></i>
          </button>
        </div>
        
        <!-- Language Selection Bottom Sheet Modal -->
        <div class="mobile-language-menu-overlay" id="mobile-language-menu-overlay" aria-hidden="true"></div>
        <div class="mobile-language-menu" id="mobile-language-dropdown-menu" role="dialog" aria-modal="true" aria-labelledby="mobile-language-menu-title" aria-hidden="true">
          <div class="mobile-language-menu-header">
            <h3 class="mobile-language-menu-title" id="mobile-language-menu-title">Select Language</h3>
            <button class="mobile-language-menu-close" id="mobile-language-menu-close" aria-label="Close" type="button">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>
          <div class="mobile-language-menu-items">
            <button class="mobile-language-menu-item" data-locale="tr" role="menuitem" type="button">
              <span class="language-flag">
                <svg width="28" height="28" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="20" height="20" rx="2" fill="#E30A17"/>
                  <circle cx="7.5" cy="10" r="4.5" fill="#FFFFFF"/>
                  <circle cx="9" cy="10" r="4" fill="#E30A17"/>
                  <path d="M13.5 7.5L13.8 8.3L14.6 8.1L13.9 8.6L14.2 9.4L13.5 8.9L12.8 9.4L13.1 8.6L12.4 8.1L13.2 8.3Z" fill="#FFFFFF"/>
                </svg>
              </span>
              <span class="language-code">TR</span>
              <span class="language-name">Türkçe</span>
            </button>
            <button class="mobile-language-menu-item" data-locale="en" role="menuitem" type="button">
              <span class="language-flag">
                <svg width="28" height="28" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect width="20" height="20" rx="2" fill="#012169"/>
                  <path d="M0 0l20 20M20 0L0 20" stroke="white" stroke-width="2"/>
                  <path d="M0 0l20 20M20 0L0 20" stroke="#C8102E" stroke-width="1.2"/>
                </svg>
              </span>
              <span class="language-code">EN</span>
              <span class="language-name">English</span>
            </button>
          </div>
        </div>

        <!-- CTA Button -->
        <a href="kayit.html" class="mobile-menu-cta">
          Join the Network
          <i class="bi bi-arrow-right"></i>
        </a>
      </div>
    </aside>
  </div>
  <!-- ======= end Mobile Menu Drawer ======= -->

  <!-- ============== Start Hero section ========== -->
  <section class="hero-modern d-flex flex-column justify-content-center align-items-center" id="hero">
    <div id="particles-js"></div>
    <!-- Network Pattern Background -->
    <div class="network-pattern-bg">
      <svg class="network-pattern-svg" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <pattern id="networkPattern" x="0" y="0" width="100" height="100" patternUnits="userSpaceOnUse">
            <circle cx="50" cy="50" r="2" fill="rgba(31, 122, 91, 0.15)"/>
            <line x1="50" y1="50" x2="150" y2="50" stroke="rgba(31, 122, 91, 0.08)" stroke-width="0.5"/>
            <line x1="50" y1="50" x2="50" y2="150" stroke="rgba(31, 122, 91, 0.08)" stroke-width="0.5"/>
            <line x1="50" y1="50" x2="150" y2="150" stroke="rgba(31, 122, 91, 0.06)" stroke-width="0.5"/>
          </pattern>
        </defs>
        <rect width="100%" height="100%" fill="url(#networkPattern)"/>
      </svg>
    </div>
    <div class="container">
      <div class="row justify-content-center align-items-center">
        <div class="hero-text col-12 col-lg-6">
          <div class="hero-content-modern">
            <!-- System Status Badge -->
            <div class="system-status-badge" data-aos="fade-up" data-aos-delay="50">
              <span class="status-indicator-dot active"></span>
              <span class="status-text">System Active</span>
              <span class="status-update-time" id="system-last-update">Last update: <span id="update-time-text">2 min ago</span></span>
            </div>
            
            <div class="hero-eyebrow" data-aos="fade-up" data-aos-delay="100">National Disaster Coordination Network</div>
            <h1 class="hero-title-modern" data-aos="fade-up" data-aos-delay="150">
              Disaster Preparedness and <span class="hero-accent">Coordination System</span>
            </h1>
            <p class="hero-subtitle-modern" data-aos="fade-up" data-aos-delay="200">
              Active disaster preparedness network across Turkey. Neighborhood-based coordination, real-time status monitoring, and secure communication infrastructure.
            </p>
            <div class="hero-actions-modern" data-aos="fade-up" data-aos-delay="250">
              <a href="kayit.html" class="btn btn-hero-primary" aria-label="Join the Network">
                <i class="bi bi-diagram-3-fill me-2"></i>Join the Network
                <i class="bi bi-arrow-right ms-2"></i>
              </a>
              <a href="preparedness-test.html" class="btn btn-hero-secondary">
                <i class="bi bi-clipboard-check me-2"></i>Preparedness Assessment
              </a>
            </div>
            <div class="hero-stats-modern" data-aos="fade-up" data-aos-delay="300">
              <div class="hero-stat-card">
                <div class="hero-stat-number" id="count-up-joined">0</div>
                <div class="hero-stat-label">Joined in last 24 hours</div>
              </div>
              <div class="hero-stat-card">
                <div class="hero-stat-number">81</div>
                <div class="hero-stat-label">Active province coordination</div>
              </div>
              <div class="hero-stat-card">
                <div class="hero-stat-number" id="network-total-users">0</div>
                <div class="hero-stat-label">Total registered users</div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-6" data-aos="fade-left" data-aos-delay="200">
          <!-- Network Status Card -->
          <div class="network-status-card">
            <div class="network-status-header">
              <div class="network-status-title">
                <i class="bi bi-activity me-2"></i>
                <span>Network Status</span>
              </div>
              <div class="network-status-indicator">
                <span class="status-dot active"></span>
                <span class="status-text">Active</span>
              </div>
            </div>
            <div class="network-status-metrics">
              <div class="network-metric">
                <div class="metric-value" id="network-active-users">12,847</div>
                <div class="metric-label">Active Users</div>
              </div>
              <div class="network-metric">
                <div class="metric-value" id="network-volunteers">3,421</div>
                <div class="metric-label">Verified Volunteers</div>
              </div>
              <div class="network-metric">
                <div class="metric-value" id="network-update-time">2 min ago</div>
                <div class="metric-label">Last Update</div>
              </div>
            </div>
          </div>
          
          <div class="hero-map-card">
            <div class="map-header">
              <h3 class="map-title">Turkey Disaster Preparedness Status</h3>
              <span class="map-subtitle">Regional Preparedness Levels</span>
            </div>
            <div class="gis-map-container" id="gis-map-container">
              <!-- Real Turkey Map using Leaflet -->
              <div id="turkey-disaster-map"></div>
              
              <!-- Legend Toggle Button (shown when legend is closed) -->
              <button class="legend-toggle-btn" id="legend-toggle-btn" aria-label="Open legend" style="display: none;">
                <i class="bi bi-info-circle"></i>
              </button>
              
              <!-- Map Legend -->
              <div class="map-legend-gis" id="map-legend-gis">
                <div class="legend-header">
                  <span class="legend-title">Preparedness Level</span>
                  <button class="legend-close-btn" id="legend-close-btn" aria-label="Close legend">
                    <i class="bi bi-x-lg"></i>
                  </button>
                </div>
                <div class="legend-items">
                  <div class="legend-item-gis">
                    <div class="legend-color-box" style="background: #4CAF50; border-color: #388E3C;"></div>
                    <span class="legend-label-gis">Low Risk</span>
                  </div>
                  <div class="legend-item-gis">
                    <div class="legend-color-box" style="background: #FFB300; border-color: #F57C00;"></div>
                    <span class="legend-label-gis">Medium Risk</span>
                  </div>
                  <div class="legend-item-gis">
                    <div class="legend-color-box" style="background: #E53935; border-color: #C62828;"></div>
                    <span class="legend-label-gis">High Risk</span>
                  </div>
                </div>
                <div class="legend-divider"></div>
                <div class="legend-fault-toggle">
                  <label class="fault-toggle-label">
                    <input type="checkbox" id="fault-line-toggle" class="fault-toggle-input">
                    <span class="fault-toggle-slider"></span>
                    <div class="fault-toggle-content">
                      <div class="legend-line" style="border-top: 2px dashed #6C5F5B; opacity: 0.8;"></div>
                      <span class="legend-label-gis">Fault Line</span>
                    </div>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- ============== End Hero section ========== -->

  <!-- ============== Start Why We Exist Section ========== -->
  <section class="container services py-5 section-alt-bg bg-pattern" id="why-we-exist-detail" style="position: relative;">
    <div class="page-container">
      <div class="feature-grid feature-grid-3">
        <!-- Card 1: So My Family Can Be Safe First -->
        <div class="feature-card" data-aos="fade-up" data-aos-delay="200">
          <div class="feature-card-icon">
            <i class="bi bi-heart-fill" aria-hidden="true"></i>
          </div>
          <h3 class="feature-card-title">So My Family Can Be Safe First</h3>
          <p class="feature-card-description">
            In a disaster, a person's first reflex is to reach their family. They want to know where their loved ones are and if they are safe. Not being able to access this information increases panic and uncertainty. A person who knows their family's situation makes healthier decisions. No one can move to the next step without their family being safe.
          </p>
          <div class="feature-card-stat">
            <i class="bi bi-people me-1"></i> Family-focused
          </div>
        </div>
        
        <!-- Card 2: So We Don't Leave Each Other Alone -->
        <div class="feature-card" data-aos="fade-up" data-aos-delay="250">
          <div class="feature-card-icon">
            <i class="bi bi-diagram-3-fill" aria-hidden="true"></i>
          </div>
          <h3 class="feature-card-title">So We Don't Leave Each Other Alone</h3>
          <p class="feature-card-description">
            After family, being able to connect with the environment is important. Knowing who needs help is vital. When this connection cannot be established, people feel alone. Knowing you are part of a network saves you from panic.
          </p>
          <div class="feature-card-stat">
            <i class="bi bi-shield-check me-1"></i> Community connection
          </div>
        </div>
        
        <!-- Card 3: So We Can Help Together -->
        <div class="feature-card" data-aos="fade-up" data-aos-delay="300">
          <div class="feature-card-icon">
            <i class="bi bi-people-fill" aria-hidden="true"></i>
          </div>
          <h3 class="feature-card-title">So We Can Help Together</h3>
          <p class="feature-card-description">
            People don't just want to ask for help, they also want to be able to help. An individual whose family is safe can support others. This solidarity reduces the effects of disasters. Communities that act together recover faster.
          </p>
          <div class="feature-card-stat">
            <i class="bi bi-heart-fill me-1"></i> Solidarity
          </div>
        </div>
      </div>
      
      <!-- Summary Sentence -->
      <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="350">
        <p class="section-description" style="font-size: 1.1rem; max-width: 800px; margin: 0 auto; line-height: 1.8;">
          <strong>National Disaster Network was established so that people are not alone during disasters and can help each other.</strong>
        </p>
      </div>
      
      <!-- Disaster Preparedness Test Button -->
      <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
        <a href="preparedness-test.html" class="btn btn-primary-premium-cta">
          <i class="bi bi-clipboard-check me-2"></i>Take Disaster Preparedness Test
          <i class="bi bi-arrow-right ms-2"></i>
        </a>
      </div>
    </div>
  </section>
  <!-- ============== End Why We Exist Section ========== -->

  <!-- ============== Start About section (How It Works) ========== -->
  <section class="about py-5 how-it-works how-it-works-premium" id="how-it-works">
    <div class="page-container">
      <!-- Premium Wrapper Panel with Gradient Background -->
      <div class="how-it-works-wrapper-premium">
        <!-- Title Block -->
        <div class="how-it-works-header-premium" data-aos="fade-up">
          <span class="section-eyebrow-premium">How It Works?</span>
          <h2 class="how-it-works-title-premium">3 Simple Steps to Join the Safe Neighborhood Network</h2>
          <p class="how-it-works-description-premium">Register, complete your information, join the safe network</p>
        </div>

        <!-- Visual Stepper Component - ALWAYS VISIBLE AT TOP -->
        <div class="how-it-works-stepper-premium" id="how-it-works-stepper" data-aos="fade-up" data-aos-delay="100">
          <div class="stepper-item-premium active" data-step="1">
            <div class="stepper-circle-premium active">
              <span class="stepper-number-premium">1</span>
              <i class="bi bi-check stepper-check" style="display: none;"></i>
            </div>
            <div class="stepper-line-premium"></div>
            <div class="stepper-content-premium">
              <div class="stepper-label-premium">Join the Network</div>
            </div>
          </div>
          <div class="stepper-item-premium pending" data-step="2">
            <div class="stepper-circle-premium pending">
              <span class="stepper-number-premium">2</span>
              <i class="bi bi-check stepper-check" style="display: none;"></i>
            </div>
            <div class="stepper-line-premium"></div>
            <div class="stepper-content-premium">
              <div class="stepper-label-premium">Complete Your Information</div>
            </div>
          </div>
          <div class="stepper-item-premium pending" data-step="3">
            <div class="stepper-circle-premium pending">
              <span class="stepper-number-premium">3</span>
              <i class="bi bi-check stepper-check" style="display: none;"></i>
            </div>
            <div class="stepper-content-premium">
              <div class="stepper-label-premium">Join Safe Network</div>
            </div>
          </div>
        </div>

        <!-- 2-Column Grid Layout: Left (5/12) + Right (7/12) - Desktop Only -->
        <div class="how-it-works-grid-premium">
          <!-- LEFT COLUMN (5/12): Benefit Cards + Trust Badges - Desktop Only -->
          <div class="how-it-works-left-premium">

            <!-- Benefit Cards Stack -->
            <div class="how-it-works-benefits-premium" data-aos="fade-up" data-aos-delay="150">
              <div class="benefit-card-premium">
                <div class="benefit-icon-premium">
                  <i class="bi bi-clock-fill"></i>
                </div>
                <span class="benefit-text-premium">2 minute registration</span>
              </div>
              <div class="benefit-card-premium">
                <div class="benefit-icon-premium">
                  <i class="bi bi-shield-lock-fill"></i>
                </div>
                <span class="benefit-text-premium">Private and secure</span>
              </div>
              <div class="benefit-card-premium">
                <div class="benefit-icon-premium">
                  <i class="bi bi-people-fill"></i>
                </div>
                <span class="benefit-text-premium">Connect with neighbors</span>
              </div>
            </div>

            <!-- Trust Badges Row -->
            <div class="how-it-works-trust-premium" data-aos="fade-up" data-aos-delay="200">
              <div class="trust-badge-premium">
                <i class="bi bi-geo-alt-fill"></i>
                <span>Active in 81 provinces</span>
              </div>
              <div class="trust-badge-premium">
                <i class="bi bi-check-circle-fill"></i>
                <span>GDPR compliant</span>
              </div>
              <div class="trust-badge-premium">
                <i class="bi bi-shield-check"></i>
                <span>AFAD integration</span>
              </div>
            </div>
          </div>

          <!-- RIGHT COLUMN (7/12): Elevated Form Card -->
          <div class="how-it-works-right-premium">
            <!-- Large Elevated Form Card -->
            <div class="form-card-premium">
        <!-- Step 1: Join the Network -->
        <div class="how-it-works-step active" id="how-it-works-step-1" data-step="1" data-aos="fade-up" data-aos-delay="250">
          <!-- Form Card Header -->
          <header class="form-card-header-premium">
            <div class="form-card-header-top">
              <span class="step-badge-premium-form">1</span>
              <div class="form-card-header-content">
                <h3 class="form-card-title-premium">Join the Network</h3>
                <span class="form-card-progress-premium">Step 1 / 3</span>
              </div>
              <i class="bi bi-chevron-down accordion-chevron-mobile"></i>
            </div>
            <div class="form-card-divider-premium"></div>
          </header>
          <!-- Form Card Body -->
          <div class="form-card-body-premium">
            <p class="form-card-lead-premium">Join the safe neighborhood network by entering your basic information.</p>
            
            <form id="how-it-works-form-1" class="how-it-works-form-premium">
                <div class="form-group-wrapper">
                  <div class="form-group">
                    <label for="hiw-fullName" class="form-label">
                      Full Name <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <input type="text" class="form-control" id="hiw-fullName" name="fullName" required placeholder="Your first and last name">
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="hiw-phone" class="form-label">
                      Phone Number <span class="text-muted" style="font-size: 0.85rem;">(For emergency notifications – recommended)</span>
                    </label>
                    <div class="input-wrapper">
                      <input type="tel" class="form-control" id="hiw-phone" name="phone" placeholder="05XX XXX XX XX" pattern="[0-9]{10,11}">
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                    <small class="form-text text-muted">Enter your 10-11 digit phone number</small>
                  </div>

                  <div class="form-group">
                    <label for="hiw-birthDate" class="form-label">
                      Date of Birth <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <input type="date" class="form-control" id="hiw-birthDate" name="birthDate" required>
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                    <div class="age-display mt-2" id="age-display" style="display: none;">
                      <span class="age-badge"></span>
                      <span class="age-message"></span>
                    </div>
                  </div>
                </div>

            <!-- Form Actions Footer -->
            <div class="form-actions-premium">
              <div class="form-actions-divider-premium"></div>
              <div class="form-actions-content-premium">
                <button type="submit" class="btn btn-primary-premium" id="hiw-step1-submit">
                  <span class="btn-text">Continue</span>
                  <span class="btn-loader" style="display: none;">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  </span>
                </button>
              </div>
            </div>
          </form>
          </div>
        </div>

        <!-- Step 2: Complete Your Information -->
        <div class="how-it-works-step" id="how-it-works-step-2" data-step="2">
          <!-- Form Card Header -->
          <header class="form-card-header-premium">
            <div class="form-card-header-top">
              <span class="step-badge-premium-form">2</span>
              <div class="form-card-header-content">
                <h3 class="form-card-title-premium">Complete Your Information</h3>
                <span class="form-card-progress-premium">Step 2 / 3</span>
              </div>
              <i class="bi bi-chevron-down accordion-chevron-mobile"></i>
            </div>
            <div class="form-card-divider-premium"></div>
          </header>
          <!-- Form Card Body -->
          <div class="form-card-body-premium">
              <p class="step-lead">Share where you live and building information, let us match you with the right group.</p>
              
              <form id="how-it-works-form-2" class="how-it-works-form">
                <div class="form-group-wrapper">
                  <div class="form-group">
                    <label for="hiw-city" class="form-label">
                      Province <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <select class="form-select" id="hiw-city" name="city" required>
                        <option value="">Select province</option>
                        <option value="01">Adana</option>
                        <option value="06">Ankara</option>
                        <option value="07">Antalya</option>
                        <option value="16">Bursa</option>
                        <option value="26">Eskişehir</option>
                        <option value="27">Gaziantep</option>
                        <option value="34">Istanbul</option>
                        <option value="35">Izmir</option>
                        <option value="58">Sivas</option>
                        <option value="61">Trabzon</option>
                      </select>
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="hiw-district" class="form-label">
                      District <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <input type="text" class="form-control" id="hiw-district" name="district" required placeholder="Your district name" disabled>
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="hiw-neighborhood" class="form-label">
                      Neighborhood <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <input type="text" class="form-control" id="hiw-neighborhood" name="neighborhood" required placeholder="Your neighborhood name" disabled>
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="hiw-buildingAge" class="form-label">
                      Building Age <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <select class="form-select" id="hiw-buildingAge" name="buildingAge" required>
                        <option value="">Select</option>
                        <option value="0-5">0-5 years</option>
                        <option value="6-10">6-10 years</option>
                        <option value="11-20">11-20 years</option>
                        <option value="21-30">21-30 years</option>
                        <option value="30+">30+ years</option>
                      </select>
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                  </div>

                  <div class="form-group">
                    <label for="hiw-floor" class="form-label">
                      Floor Information <span class="text-danger">*</span>
                    </label>
                    <div class="input-wrapper">
                      <input type="number" class="form-control" id="hiw-floor" name="floor" required placeholder="Your floor" min="0" max="100">
                      <i class="bi bi-check-circle-fill input-check" style="display: none;"></i>
                    </div>
                  </div>
                </div>

            <!-- Form Actions Footer -->
            <div class="form-actions-premium">
              <div class="form-actions-divider-premium"></div>
              <div class="form-actions-content-premium">
                <button type="button" class="btn btn-outline-secondary-premium" id="hiw-step2-back">
                  Back
                </button>
                <button type="submit" class="btn btn-primary-premium" id="hiw-step2-submit" disabled>
                  <span class="btn-text">Continue</span>
                  <span class="btn-loader" style="display: none;">
                    <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                  </span>
                </button>
              </div>
            </div>
          </form>
          </div>
        </div>

        <!-- Step 3: Join Safe Network -->
        <div class="how-it-works-step" id="how-it-works-step-3" data-step="3">
          <!-- Form Card Header -->
          <header class="form-card-header-premium">
            <div class="form-card-header-top">
              <span class="step-badge-premium-form">3</span>
              <div class="form-card-header-content">
                <h3 class="form-card-title-premium">Join Safe Network</h3>
                <span class="form-card-progress-premium">Step 3 / 3</span>
              </div>
              <i class="bi bi-chevron-down accordion-chevron-mobile"></i>
            </div>
            <div class="form-card-divider-premium"></div>
          </header>
          <!-- Form Card Body -->
          <div class="form-card-body-premium">
              <div class="success-state text-center">
                <div class="success-icon mb-3">
                  <i class="bi bi-check-circle-fill" style="font-size: 4rem; color: var(--brand-color);"></i>
                </div>
                <h4 class="success-title" id="success-greeting">Registration completed!</h4>
                <p class="step-lead">You can now receive notifications specific to your area.</p>
              </div>
            </div>
          </div>
        </div>

            </div>
          </div>
        </div>
      </div>

      <!-- Optional Step: Share Network Opinions - Separate Card After Main Steps -->
      <div class="how-it-works-optional-section" id="how-it-works-optional" style="display: none;">
        <div class="form-card-premium optional-step-card">
          <header class="form-card-header-premium">
            <div class="form-card-header-top">
              <span class="step-badge-premium-form optional">?</span>
              <div class="form-card-header-content">
                <h3 class="form-card-title-premium">Share Network Opinions <span class="optional-badge">(Optional)</span></h3>
              </div>
            </div>
            <div class="form-card-divider-premium"></div>
          </header>
          <div class="form-card-body-premium">
            <p class="step-lead">You can share your disaster perception with a short 2-minute survey.</p>
            
            <div class="optional-step-actions text-center mt-4">
              <button type="button" class="btn btn-primary btn-lg mb-3" id="hiw-start-survey" style="width: 100%; max-width: 400px;">
                I want to answer
              </button>
              <div>
                <button type="button" class="btn btn-link text-muted" id="hiw-skip-survey">
                  Skip for now
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- ============== End About section (How It Works) ========== -->

  <!-- ============== Start City Stats Section ========== -->
  <section class="container py-5" id="city-stats-section" style="position: relative;">
    <div class="page-container">
      <div id="city-stats-container"></div>
      
      <!-- Share Network Opinions Button -->
      <div class="text-center mt-5" data-aos="fade-up" data-aos-delay="400">
        <a href="network-opinions.html" class="btn btn-primary-premium-disaster">
          <i class="bi bi-share-network me-2"></i>Share Network Opinions
          <i class="bi bi-arrow-right ms-2"></i>
        </a>
      </div>
    </div>
  </section>
  <!-- ============== End City Stats Section ========== -->

  <!-- Section Divider -->
  <hr class="section-divider">

  <!-- CTA Band - Premium Gradient Banner -->
  <section class="cta-banner-premium">
    <div class="cta-banner-container">
      <div class="cta-banner-content" data-aos="fade-up">
        <h2 class="cta-banner-headline">Join Safe Network, Connect with Your Neighbors</h2>
        <p class="cta-banner-description">With National Disaster Network, you won't be alone in a disaster. Connect with your neighbors in your neighborhood beforehand, increase your safety.</p>
        <div class="cta-banner-button">
          <a href="kayit.html" class="btn cta-banner-btn">
            Join the Network
            <i class="bi bi-arrow-right ms-2"></i>
          </a>
        </div>
        <div class="cta-banner-trust">
          <span class="cta-banner-trust-item">
            <i class="bi bi-shield-check"></i> GDPR Compliant
          </span>
          <span class="cta-banner-trust-item">
            <i class="bi bi-lock"></i> Privacy-Focused
          </span>
          <span class="cta-banner-trust-item">
            <i class="bi bi-building"></i> AFAD Integration
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Divider -->
  <hr class="section-divider">

  <!-- Contributors Modal -->
  <div id="katki-verenler-modal" class="katki-verenler-modal-overlay" style="display: none;">
    <div class="katki-verenler-modal-content">
      <div class="katki-verenler-modal-header">
        <h3 class="katki-verenler-modal-title">Contributors</h3>
        <button class="katki-verenler-modal-close" id="katki-verenler-modal-close" aria-label="Close">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <div class="katki-verenler-modal-body">
        <div class="katki-verenler-grid" id="katki-verenler-grid">
          <!-- Contributors will be added here via JavaScript -->
        </div>
        <div class="katki-verenler-footer">
          <p class="katki-verenler-disclaimer">
            Academic contributions have been provided within the scope of consultancy and evaluation.
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- ZATU Info Popup -->
  <div id="zatu-popup" class="zatu-popup-overlay" style="display: none;">
    <div class="zatu-popup-content">
      <div class="zatu-popup-header">
        <h3 class="zatu-popup-title">What is ZATU?</h3>
        <button class="zatu-popup-close" id="zatu-popup-close" aria-label="Close">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <div class="zatu-popup-body">
        <p>ZATU is a domestic software system that provides the technological infrastructure of the National Disaster Network.</p>
        <p>It enables rapid transmission of location, status, and communication information during disasters.</p>
        <p>It is designed to work with public institutions and local governments.</p>
        <p>It supports information sharing and coordination during disasters.</p>
        <p><strong>National Disaster Network operates on ZATU infrastructure. ZATU is the technological infrastructure provider of the National Disaster Network.</strong></p>
      </div>
    </div>
  </div>

  <!-- ============== Start Footer section ========== -->
  <div class="footer">
    <div class="page-container">
      <div class="footer-grid">
        <!-- Left Column - Brand -->
        <div class="footer-brand">
          <a href="#top" class="footer-logo">
            National Disaster Network
          </a>
          <p class="footer-description">National Disaster Network is Turkey's national disaster preparedness network. Be prepared for disasters by connecting with your neighbors beforehand.</p>
          <div class="footer-social">
            <h4 class="footer-social-title">Follow Us</h4>
            <div class="footer-social-icons">
              <a href="https://www.instagram.com/zatuturkiye" class="footer-social-icon" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="bi bi-instagram"></i></a>
            </div>
          </div>
        </div>
        
        <!-- Right Column - Mobile App Download -->
        <div class="footer-legal">
          <h4 class="footer-heading">Download Mobile App</h4>
          <div class="footer-app-download">
            <a href="https://apps.apple.com/tr/app/zatu-özel-afet-uygulamasi/id6463898919" class="footer-app-button" target="_blank" rel="noopener noreferrer" aria-label="Download National Disaster Network app from App Store">
              <img src="../images/app-store.webp" alt="Download from App Store" class="app-store-badge">
            </a>
            <a href="https://play.google.com/store/apps/details?id=com.zelze.zatu_app&pcampaignid=web_share" class="footer-app-button" target="_blank" rel="noopener noreferrer" aria-label="Download National Disaster Network app from Google Play">
              <img src="https://play.google.com/intl/en_us/badges/static/images/badges/tr_badge_web_generic.png" alt="Download from Google Play" class="google-play-badge">
            </a>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <div class="page-container">
        <div class="footer-bottom-content">
          <p class="footer-copyright">© 2025 National Disaster Network. All rights reserved.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- ============== end Footer section ========== -->

  <!--  JQuery file     -->
  <script src="../js/jquery-3.6.1.min.js"></script>
  
  <!-- Leaflet JS for real map -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <!-- bootstrap min js -->
  <script src="../js/bootstrap.min.js"></script>

  <!--  toasts file     -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>

  <!--  owl carousel    -->
  <script src="../js/owl.carousel.min.js"></script>

  <!-- aos file    -->
  <script src="../js/aos.js"></script>

  <!-- gsap file    -->
  <script src="../js/gsap.min.js"></script>

  <!--  counter     -->
  <script src="../js/jquery.counterup.min.js"></script>
  <script src="../js/jquery.waypoints.js"></script>

  <!-- particles js file  -->
  <script src="../js/particles.min.js"></script>

  <!-- jquery isotope file -->
  <script src="../js/isotope.min.js"></script>

  <!-- jquery fancybox file -->
  <script src="../js/jquery.fancybox.min.js"></script>

  <!--  Tilt.js file     -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>

  <!--  api mock (for survey endpoints)  -->
  <script src="../js/api-mock.js"></script>

  <!--  surveys js file  -->
  <script src="../js/surveys.js"></script>
  <script src="../js/disaster-survey-modern.js"></script>

  <!--  city stats js files  -->
  <script src="../js/api-stats.js"></script>
  <script src="../js/counter.js"></script>
  <script src="../js/city-stats.js"></script>

  <!--  user progress and sticky cta bar  -->
  <script src="../js/user-progress.js"></script>
  <script src="../js/sticky-cta-bar.js"></script>

  <!--  mobile menu  -->
  <script src="../js/mobile-menu.js"></script>

  <!--  main js file  -->
  <script src="../js/main.js"></script>

  <!--  how it works interactive js file  -->
  <script src="../js/how-it-works.js"></script>

  <!--  language dropdown js file  -->
  <script src="../js/language-dropdown.js"></script>
  
  <!-- How It Works Step-Based Form Management -->
  <script src="../js/how-it-works-steps.js"></script>
  
  <!-- Mobile accordion for How It Works section (deprecated, kept for compatibility) -->
  <script src="../js/how-it-works-mobile.js"></script>
  
  <!-- Profile Test Wizard -->
  <script src="../js/profile-test-wizard.js"></script>
  
  <!-- Disaster Survey Wizard -->
  <script src="../js/disaster-survey-wizard.js"></script>

  <!-- Initialize City Stats -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Count-up animation for numbers
      function animateCountUp(element, target, duration = 2000) {
        const start = 0;
        const increment = target / (duration / 16);
        let current = start;
        
        const timer = setInterval(() => {
          current += increment;
          if (current >= target) {
            current = target;
            clearInterval(timer);
          }
          element.textContent = Math.floor(current).toLocaleString('en-US');
        }, 16);
      }
      
      // Animate "last 24h joined"
      const countUpElement = document.getElementById('count-up-joined');
      if (countUpElement) {
        animateCountUp(countUpElement, 1847, 2000);
      }
      
      // Animate total users
      const totalUsersEl = document.getElementById('network-total-users');
      if (totalUsersEl) {
        animateCountUp(totalUsersEl, 124583, 2500);
      }
      
      // System Status Updates (live data simulation)
      function updateSystemStatus() {
        const updateTimeText = document.getElementById('update-time-text');
        if (updateTimeText) {
          const minutes = Math.floor(Math.random() * 3) + 1;
          updateTimeText.textContent = minutes + ' min ago';
        }
      }
      
      // Network Status Updates (mock data)
      function updateNetworkStatus() {
        const activeUsersEl = document.getElementById('network-active-users');
        const volunteersEl = document.getElementById('network-volunteers');
        const updateTimeEl = document.getElementById('network-update-time');
        
        if (activeUsersEl) {
          const baseUsers = 12847;
          const variation = Math.floor(Math.random() * 50) - 25;
          activeUsersEl.textContent = (baseUsers + variation).toLocaleString('en-US');
        }
        
        if (volunteersEl) {
          const baseVolunteers = 3421;
          const variation = Math.floor(Math.random() * 20) - 10;
          volunteersEl.textContent = (baseVolunteers + variation).toLocaleString('en-US');
        }
        
        if (updateTimeEl) {
          const minutes = Math.floor(Math.random() * 5) + 1;
          updateTimeEl.textContent = minutes + ' min ago';
        }
      }
      
      // Update system status every 60 seconds
      updateSystemStatus();
      setInterval(updateSystemStatus, 60000);
      
      // Update network status every 30 seconds
      updateNetworkStatus();
      setInterval(updateNetworkStatus, 30000);
      
      // Initialize Real Turkey Map with Leaflet
      if (document.getElementById('turkey-disaster-map')) {
        // Turkey bounds to restrict panning
        const turkeyBounds = [
          [35.5, 25.5],  // Southwest corner
          [42.5, 45.0]   // Northeast corner
        ];

        // Initialize map centered on Turkey with restricted bounds
        const map = L.map('turkey-disaster-map', {
          center: [39.0, 35.0],
          zoom: 6,
          minZoom: 5,
          maxZoom: 9,
          zoomControl: true,
          attributionControl: false,
          scrollWheelZoom: false,  // Disable default scroll zoom
          doubleClickZoom: false,
          boxZoom: false,
          dragging: true,
          touchZoom: true,
          maxBounds: turkeyBounds,
          maxBoundsViscosity: 1.0  // Prevent panning outside bounds
        });
        
        // Custom CTRL + Scroll zoom handler
        let isCtrlPressed = false;
        const mapContainer = map.getContainer();
        
        // Track CTRL key state
        document.addEventListener('keydown', function(e) {
          if (e.ctrlKey || e.metaKey) {
            isCtrlPressed = true;
          }
        });
        
        document.addEventListener('keyup', function(e) {
          if (!e.ctrlKey && !e.metaKey) {
            isCtrlPressed = false;
          }
        });
        
        // Handle scroll wheel zoom only when CTRL is pressed
        mapContainer.addEventListener('wheel', function(e) {
          if (isCtrlPressed || e.ctrlKey || e.metaKey) {
            e.preventDefault();
            e.stopPropagation();
            
            const delta = e.deltaY;
            const currentZoom = map.getZoom();
            
            // Smooth zoom with delta sensitivity
            const zoomDelta = delta > 0 ? -0.5 : 0.5;
            const newZoom = Math.max(
              map.getMinZoom(),
              Math.min(map.getMaxZoom(), currentZoom + zoomDelta)
            );
            
            map.setZoom(newZoom, { animate: true });
          }
        }, { passive: false });

        // Add OpenStreetMap tile layer (light, professional style)
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 9,
          minZoom: 5,
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Risk level colors (matching legend exactly - clearer colors)
        const riskColors = {
          low: '#4CAF50',      // Green (clearly visible)
          medium: '#FFB300',   // Amber/Yellow (clearly visible)
          high: '#E53935'      // Red (clearly visible, not neon)
        };

        // Border color for region separation
        const borderColor = '#6B7280'; // Subtle gray border
        
        // Store fault line layer group for toggle (initially hidden)
        const faultLineLayer = L.layerGroup();

        // Regional data with more accurate Turkey coordinates
        const regionData = [
          {
            name: 'Marmara Region',
            risk: 'medium',
            coordinates: [[41.2, 27.0], [41.5, 29.8], [40.1, 30.2], [40.0, 28.5], [40.8, 27.2], [41.2, 27.0]],
            stats: 'Pop: 25M • Preparedness: 68%'
          },
          {
            name: 'Aegean Region',
            risk: 'high',
            coordinates: [[39.5, 26.0], [39.8, 28.8], [38.2, 29.5], [37.8, 27.5], [38.5, 26.2], [39.5, 26.0]],
            stats: 'Pop: 10M • Preparedness: 52%'
          },
          {
            name: 'Mediterranean Region',
            risk: 'high',
            coordinates: [[37.2, 30.0], [37.8, 32.8], [36.0, 33.5], [35.5, 31.2], [36.5, 30.2], [37.2, 30.0]],
            stats: 'Pop: 10M • Preparedness: 55%'
          },
          {
            name: 'Central Anatolia',
            risk: 'low',
            coordinates: [[40.2, 32.0], [40.8, 34.8], [38.8, 35.2], [38.5, 33.0], [39.5, 32.2], [40.2, 32.0]],
            stats: 'Pop: 12M • Preparedness: 75%'
          },
          {
            name: 'Black Sea Region',
            risk: 'medium',
            coordinates: [[41.8, 35.0], [42.2, 37.8], [40.2, 38.2], [40.0, 36.0], [41.0, 35.2], [41.8, 35.0]],
            stats: 'Pop: 8M • Preparedness: 65%'
          },
          {
            name: 'Eastern Anatolia',
            risk: 'high',
            coordinates: [[40.5, 40.0], [41.0, 42.8], [38.8, 43.2], [38.5, 41.0], [39.5, 40.2], [40.5, 40.0]],
            stats: 'Pop: 6M • Preparedness: 48%'
          },
          {
            name: 'Southeastern Anatolia',
            risk: 'high',
            coordinates: [[37.8, 38.0], [38.5, 40.8], [36.2, 41.2], [36.0, 39.0], [37.0, 38.2], [37.8, 38.0]],
            stats: 'Pop: 8M • Preparedness: 50%'
          }
        ];

        // Add regional polygons with choropleth coloring (with fade-in animation)
        const regionLayer = L.layerGroup();
        let regionIndex = 0;
        
        regionData.forEach(region => {
          const polygon = L.polygon(region.coordinates, {
            color: borderColor,
            weight: 2,
            fillColor: riskColors[region.risk],
            fillOpacity: 0.6,  // More visible semi-transparent fill
            opacity: 1,
            smoothFactor: 1
          });
          
          // Add fade-in animation
          polygon.setStyle({ opacity: 0, fillOpacity: 0 });
          regionLayer.addLayer(polygon);
          
          setTimeout(() => {
            polygon.setStyle({ 
              opacity: 1,
              fillOpacity: 0.6
            });
          }, regionIndex * 100);

          // Add hover effects with smooth transitions
          polygon.on('mouseover', function(e) {
            this.setStyle({
              fillOpacity: 0.8,
              weight: 3,
              opacity: 1
            });
            
            const riskLabel = region.risk === 'low' ? 'Low Risk' : 
                            region.risk === 'medium' ? 'Medium Risk' : 'High Risk';
            
            const popup = L.popup({
              className: 'risk-popup',
              closeButton: true,
              autoPan: false,
              offset: [0, -10]
            })
              .setLatLng(e.latlng)
              .setContent(`
                <div class="map-tooltip-content">
                  <div class="tooltip-region-name">${region.name}</div>
                  <div class="tooltip-risk-level risk-${region.risk}">${riskLabel}</div>
                  <div class="tooltip-stats">${region.stats}</div>
                </div>
              `)
              .openOn(map);
          });

          polygon.on('mouseout', function() {
            this.setStyle({
              fillOpacity: 0.6,
              weight: 2,
              opacity: 1
            });
            map.closePopup();
          });
          
          regionIndex++;
        });
        
        regionLayer.addTo(map);

        // Add fault lines as toggleable layer
        const faultLines = [
          {
            name: 'North Anatolian Fault',
            coordinates: [[41.0, 27.5], [40.8, 30.0], [40.5, 32.5], [40.2, 35.0], [40.0, 37.5], [39.8, 40.0]]
          },
          {
            name: 'East Anatolian Fault',
            coordinates: [[37.5, 37.5], [38.2, 39.5], [39.0, 41.5], [39.8, 43.0]]
          }
        ];

        faultLines.forEach((fault, index) => {
          const polyline = L.polyline(fault.coordinates, {
            color: '#6C5F5B',
            weight: 3,
            opacity: 0.9,
            dashArray: '12, 6',
            className: 'fault-line-layer'
          });
          
          faultLineLayer.addLayer(polyline);
        });
        
        // Add network nodes for major cities
        const cityNodes = [
          { name: 'Istanbul', coords: [41.0082, 28.9784], size: 8 },
          { name: 'Ankara', coords: [39.9334, 32.8597], size: 7 },
          { name: 'Izmir', coords: [38.4237, 27.1428], size: 6 },
          { name: 'Bursa', coords: [40.1826, 29.0665], size: 5 },
          { name: 'Antalya', coords: [36.8841, 30.7056], size: 5 },
          { name: 'Adana', coords: [37.0000, 35.3213], size: 5 }
        ];
        
        const networkNodesLayer = L.layerGroup();
        
        cityNodes.forEach((city, index) => {
          const node = L.circleMarker(city.coords, {
            radius: city.size,
            fillColor: '#1F7A5B',
            color: '#FFFFFF',
            weight: 2,
            fillOpacity: 0.8,
            className: 'network-city-node'
          }).addTo(map);
          
          // Add fade-in
          node.setStyle({ opacity: 0 });
          setTimeout(() => {
            node.setStyle({ opacity: 1 });
          }, 800 + (index * 100));
          
          networkNodesLayer.addLayer(node);
          
          // Add subtle connection lines between some major cities
          if (index > 0 && index <= 3) {
            const connection = L.polyline([cityNodes[0].coords, city.coords], {
              color: 'rgba(31, 122, 91, 0.15)',
              weight: 1,
              opacity: 0.3,
              dashArray: '3, 3',
              className: 'network-connection-line'
            }).addTo(map);
            
            connection.setStyle({ opacity: 0 });
            setTimeout(() => {
              connection.setStyle({ opacity: 0.3 });
            }, 1000 + (index * 150));
          }
        });
        
        networkNodesLayer.addTo(map);

        // Fault line toggle functionality
        const faultToggle = document.getElementById('fault-line-toggle');
        if (faultToggle) {
          // Initially hide fault lines
          if (!faultToggle.checked) {
            // Fault line layer is not added to map initially
          } else {
            map.addLayer(faultLineLayer);
          }
          
          faultToggle.addEventListener('change', function(e) {
            if (e.target.checked) {
              map.addLayer(faultLineLayer);
            } else {
              map.removeLayer(faultLineLayer);
            }
          });
        }
        
        // Ensure map stays within Turkey bounds
        map.on('drag', function() {
          map.panInsideBounds(turkeyBounds, { animate: false });
        });
        
        // Legend close button functionality
        const legendCloseBtn = document.getElementById('legend-close-btn');
        const legendBox = document.getElementById('map-legend-gis');
        const legendToggleBtn = document.getElementById('legend-toggle-btn');
        
        if (legendCloseBtn && legendBox && legendToggleBtn) {
          // Close legend
          legendCloseBtn.addEventListener('click', function() {
            legendBox.classList.add('hidden');
            legendToggleBtn.style.display = 'flex';
            
            // Increase map region visibility when legend is closed
            regionLayer.eachLayer(function(layer) {
              if (layer instanceof L.Polygon) {
                layer.setStyle({
                  fillOpacity: 0.75  // More visible when legend is closed
                });
              }
            });
          });
          
          // Open legend
          legendToggleBtn.addEventListener('click', function() {
            legendBox.classList.remove('hidden');
            legendToggleBtn.style.display = 'none';
            
            // Restore normal map region visibility when legend is open
            regionLayer.eachLayer(function(layer) {
              if (layer instanceof L.Polygon) {
                layer.setStyle({
                  fillOpacity: 0.6  // Normal visibility when legend is open
                });
              }
            });
          });
        }
      }
      
      // Get city from localStorage (from registration) or default to Istanbul
      const step2Data = localStorage.getItem('registration_step2');
      let city = 'Istanbul';
      
      if (step2Data) {
        try {
          const data = JSON.parse(step2Data);
          if (data.city) {
            city = data.city;
          }
        } catch (e) {
          console.error('Error parsing registration data:', e);
        }
      }

      // Initialize city stats card
      if (document.getElementById('city-stats-container')) {
        window.cityStatsCard = new CityStatsCard('city-stats-container', city);
      }
    });
  </script>

  <!-- ============== Disaster Survey Wizard Modal ========== -->
  <div class="disaster-survey-modal" id="disaster-survey-modal" style="display: none;">
    <div class="disaster-survey-modal-overlay"></div>
    <div class="disaster-survey-modal-content">
      <!-- Modal Header -->
      <div class="disaster-survey-header">
        <button type="button" class="disaster-survey-close" id="disaster-survey-close" aria-label="Close">
          <i class="bi bi-x-lg"></i>
        </button>
        <div class="disaster-survey-progress">
          <div class="disaster-survey-progress-bar">
            <div class="disaster-survey-progress-fill" id="disaster-survey-progress-fill"></div>
          </div>
          <div class="disaster-survey-progress-text" id="disaster-survey-progress-text">Question 1 / 5</div>
        </div>
      </div>

      <!-- Modal Body - Question Container -->
      <div class="disaster-survey-body" id="disaster-survey-body">
        <!-- Questions will be rendered here -->
      </div>

      <!-- Modal Footer - Navigation -->
      <div class="disaster-survey-footer" id="disaster-survey-footer">
        <button type="button" class="btn btn-outline-secondary" id="disaster-survey-back" style="display: none;">
          <i class="bi bi-arrow-left me-2"></i>Back
        </button>
        <button type="button" class="btn btn-primary-premium-cta" id="disaster-survey-next" disabled>
          Next
          <i class="bi bi-arrow-right ms-2"></i>
        </button>
      </div>
    </div>
  </div>
  <!-- ============== End Disaster Survey Wizard Modal ========== -->

  <!-- ============== Profile Test Wizard Modal ========== -->
  <div class="profile-test-modal" id="profile-test-modal" style="display: none;">
    <div class="profile-test-modal-overlay"></div>
    <div class="profile-test-modal-content">
      <!-- Modal Header -->
      <div class="profile-test-header">
        <button type="button" class="profile-test-close" id="profile-test-close" aria-label="Close">
          <i class="bi bi-x-lg"></i>
        </button>
        <div class="profile-test-progress">
          <div class="profile-test-progress-bar">
            <div class="profile-test-progress-fill" id="profile-test-progress-fill"></div>
          </div>
          <div class="profile-test-progress-text" id="profile-test-progress-text">Question 1 / 5</div>
        </div>
      </div>

      <!-- Modal Body - Question Container -->
      <div class="profile-test-body" id="profile-test-body">
        <!-- Questions will be rendered here -->
      </div>

      <!-- Modal Footer - Navigation -->
      <div class="profile-test-footer" id="profile-test-footer">
        <button type="button" class="btn btn-outline-secondary" id="profile-test-back" style="display: none;">
          <i class="bi bi-arrow-left me-2"></i>Back
        </button>
        <button type="button" class="btn btn-primary-premium-cta" id="profile-test-next" disabled>
          Continue
          <i class="bi bi-arrow-right ms-2"></i>
        </button>
      </div>
    </div>
  </div>
  <!-- ============== End Profile Test Wizard Modal ========== -->

  <!-- Contributors Modal JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const katkiVerenlerBtn = document.getElementById('katki-verenler-btn');
      const katkiVerenlerModal = document.getElementById('katki-verenler-modal');
      const katkiVerenlerModalClose = document.getElementById('katki-verenler-modal-close');
      const katkiVerenlerGrid = document.getElementById('katki-verenler-grid');

      // Contributors data (example - can be replaced with real data)
      const hocalar = [
        {
          name: 'Prof. Dr. Example Contributor 1',
          university: 'Istanbul University',
          photo: 'https://via.placeholder.com/150?text=Contributor1'
        },
        {
          name: 'Prof. Dr. Example Contributor 2',
          university: 'Ankara University',
          photo: 'https://via.placeholder.com/150?text=Contributor2'
        },
        {
          name: 'Assoc. Prof. Dr. Example Contributor 3',
          university: 'Boğaziçi University',
          photo: 'https://via.placeholder.com/150?text=Contributor3'
        },
        {
          name: 'Prof. Dr. Example Contributor 4',
          university: 'METU',
          photo: 'https://via.placeholder.com/150?text=Contributor4'
        }
      ];

      // Add contributors to grid
      function renderHocalar() {
        if (!katkiVerenlerGrid) return;
        
        katkiVerenlerGrid.innerHTML = '';
        hocalar.forEach(hoca => {
          const item = document.createElement('div');
          item.className = 'katki-verenler-item';
          item.innerHTML = `
            <img src="${hoca.photo}" alt="${hoca.name}" class="katki-verenler-photo" onerror="this.src='https://via.placeholder.com/150?text=Contributor'">
            <div class="katki-verenler-name">${hoca.name}</div>
            <div class="katki-verenler-university">${hoca.university}</div>
          `;
          katkiVerenlerGrid.appendChild(item);
        });
      }

      // Open modal
      if (katkiVerenlerBtn) {
        katkiVerenlerBtn.addEventListener('click', function(e) {
          e.preventDefault();
          if (katkiVerenlerModal) {
            renderHocalar();
            katkiVerenlerModal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
          }
        });
      }

      // Close modal
      if (katkiVerenlerModalClose) {
        katkiVerenlerModalClose.addEventListener('click', function() {
          if (katkiVerenlerModal) {
            katkiVerenlerModal.style.display = 'none';
            document.body.style.overflow = '';
          }
        });
      }

      // Close when clicking overlay
      if (katkiVerenlerModal) {
        katkiVerenlerModal.addEventListener('click', function(e) {
          if (e.target === katkiVerenlerModal) {
            katkiVerenlerModal.style.display = 'none';
            document.body.style.overflow = '';
          }
        });
      }

      // Close with ESC key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && katkiVerenlerModal && katkiVerenlerModal.style.display === 'flex') {
          katkiVerenlerModal.style.display = 'none';
          document.body.style.overflow = '';
        }
      });
    });
  </script>

  <!-- ZATU Popup JavaScript -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const zatuLink = document.getElementById('zatu-link');
      const zatuPopup = document.getElementById('zatu-popup');
      const zatuPopupClose = document.getElementById('zatu-popup-close');

      // Open popup when ZATU link is clicked
      if (zatuLink) {
        zatuLink.addEventListener('click', function(e) {
          e.preventDefault();
          if (zatuPopup) {
            zatuPopup.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
          }
        });
      }

      // Close popup when close button is clicked
      if (zatuPopupClose) {
        zatuPopupClose.addEventListener('click', function() {
          if (zatuPopup) {
            zatuPopup.style.display = 'none';
            document.body.style.overflow = ''; // Restore scrolling
          }
        });
      }

      // Close popup when clicking outside (on overlay)
      if (zatuPopup) {
        zatuPopup.addEventListener('click', function(e) {
          if (e.target === zatuPopup) {
            zatuPopup.style.display = 'none';
            document.body.style.overflow = ''; // Restore scrolling
          }
        });
      }

      // Close popup with Escape key
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && zatuPopup && zatuPopup.style.display === 'flex') {
          zatuPopup.style.display = 'none';
          document.body.style.overflow = ''; // Restore scrolling
        }
      });
    });
  </script>

</body>
</html>

